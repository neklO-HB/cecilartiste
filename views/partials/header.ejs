<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cecil'Artiste – Portfolio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/styles.css">
    <script>
        (function() {
            const stored = localStorage.getItem('cecilartiste-theme');
            const available = ['vibrant', 'chromatique', 'pastel', 'solaire'];
            if (stored && available.includes(stored)) {
                document.documentElement.classList.add('theme-' + stored);
            } else {
                document.documentElement.classList.add('theme-vibrant');
                if (stored && !available.includes(stored)) {
                    localStorage.removeItem('cecilartiste-theme');
                }
            }
        })();
    </script>
</head>
<body>
<header class="site-header">
    <div class="branding">
        <span class="logo">Cecil'<span>Artiste</span></span>
        <p class="tagline">Photographe à Amiens &amp; se déplace partout en France.</p>
    </div>
    <% const categoriesForNav = navCategories || []; %>
    <% const resolvedActiveCategorySlug = typeof activeCategorySlug !== 'undefined' ? activeCategorySlug : null; %>
    <% const resolvedIsGalleryOverview = typeof isGalleryOverview !== 'undefined' ? isGalleryOverview : false; %>
    <nav class="main-nav" aria-label="Navigation principale">
        <a href="/" class="<%= currentPath === '/' ? 'is-active' : '' %>">Accueil</a>
        <details class="main-nav__dropdown" <%= resolvedIsGalleryOverview || resolvedActiveCategorySlug ? 'open' : '' %>>
            <summary class="main-nav__dropdown-label <%= (resolvedIsGalleryOverview || resolvedActiveCategorySlug) ? 'is-active' : '' %>" role="button" aria-haspopup="true">
                Galerie
                <span aria-hidden="true" class="main-nav__chevron">▾</span>
            </summary>
            <div class="main-nav__dropdown-panel">
                <a href="/galerie" class="main-nav__dropdown-link <%= resolvedIsGalleryOverview ? 'is-active' : '' %>">Toutes les galeries</a>
                <% if (categoriesForNav.length > 0) { %>
                    <ul class="main-nav__dropdown-list">
                        <% categoriesForNav.forEach(category => { %>
                            <% const isActive = resolvedActiveCategorySlug === category.slug; %>
                            <li>
                                <a href="/galerie/<%= category.slug %>" class="main-nav__dropdown-link <%= isActive ? 'is-active' : '' %>"><%= category.name %></a>
                            </li>
                        <% }) %>
                    </ul>
                <% } else { %>
                    <p class="main-nav__dropdown-empty">Créez votre première catégorie pour alimenter la galerie.</p>
                <% } %>
            </div>
        </details>
        <a href="/contact" class="<%= currentPath === '/contact' ? 'is-active' : '' %>">Contact</a>
        <% if (currentUser) { %>
            <form action="/admin/logout" method="post" class="main-nav__logout">
                <button type="submit" class="admin-link">Déconnexion</button>
            </form>
        <% } %>
    </nav>
</header>
<main class="site-content">
